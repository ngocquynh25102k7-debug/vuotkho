<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./styles/trangbaidang.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
      rel="stylesheet"
    />
  </head>

  <body>
    <header></header>
    <script src="./js/header.js"></script>
    <div class="section">
      <div class="wrapper">
        <div class="wrapper--title">
          <h1>THÔNG TIN CHI TIẾT</h1>
        </div>
        <div class="wrapper--content">
          <div class="content--1">
            <div class="content--1--letter">
              <h2>
                <img
                  src="./assets/icons/trangbaidang/icon-park-outline_add-picture.svg"
                />Hình ảnh sản phẩm
              </h2>
              <div class="kit">
                <p>0/5</p>
              </div>
            </div>
            <div class="content--1--img">
              <div class="more--img">
                <a href=""
                  ><img src="./assets/icons/trangbaidang/Frame 2025 (1).svg"
                /></a>
                <input type="file" name="" id="fileInput" />
              </div>
              <p>Chỉ hỗ trợ chèn hình ảnh.Tối đa 5 hình ảnh</p>
            </div>
          </div>
          <div class="content--2">
            <div class="content--box">
              <div class="box--1">
                <h2>
                  <img
                    src="./assets/icons/trangbaidang/iconoir_page-edit.svg"
                  />Thông tin sản phẩm
                </h2>
              </div>
              <div class="box--2">
                <div class="item--1">
                  <h3>
                    <img src="./assets/icons/trangbaidang/prime_tag.svg" />Tên
                    sản phẩm
                  </h3>
                  <input type="text" placeholder="Tên sản phẩm" />
                </div>
                <div class="item--2">
                  <div class="in--1">
                    <h3>
                      <img src="./assets/icons/trangbaidang/Vector (8).svg" />
                      Giá bán
                    </h3>
                    <input type="number" placeholder="Giá bán" />
                  </div>
                  <div class="in--1">
                    <h3>
                      <img src="./assets/icons/trangbaidang/Vector (9).svg" />Số
                      lượng
                    </h3>
                    <input
                      type="number"
                      placeholder="Số lượng"
                      maxlength="9999999"
                    />
                  </div>
                </div>
                <div class="item--2">
                  <div class="in--1">
                    <h3>
                      <img
                        src="./assets/icons/trangbaidang/Vector (10).svg"
                      />Danh mục
                    </h3>
                    <input
                      type="text"
                      placeholder="Danh mục"
                      maxlength="9999999"
                    />
                  </div>
                  <div class="in--1">
                    <h3>
                      <img
                        src="./assets/icons/trangbaidang/Vector (11).svg"
                      />Độ mới
                    </h3>
                    <input
                      type="text"
                      placeholder="Độ mới"
                      maxlength="9999999"
                    />
                  </div>
                </div>
                <div class="item--3">
                  <label for="note">Mô tả sản phẩm</label>
                  <textarea
                    id="note"
                    name="ghichu"
                    role="5"
                    cols="10"
                    maxlength="9999999"
                    placeholder="Mô tả chi tiết sản phẩm"
                  ></textarea>
                </div>
              </div>
              <div class="box--3">
                <h4>Lưu ý</h4>
                <ul>
                  <li>Kiểm tra chính tả và nội dung trước khi đăng.</li>
                  <li>
                    Không sử dụng từ ngữ phản cảm hoặc vi phạm quy định cộng
                    đồng.
                  </li>
                  <li>Hình ảnh phải rõ nét, không chứa logo hoặc watermark.</li>
                  <li>Không đăng lại cùng một nội dung nhiều lần.</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="content--3">
            <a href="">Hủy</a>
            <a href="">Đăng bài</a>
          </div>
        </div>
      </div>
    </div>
    <footer></footer>
    <script src="./js/footer.js"></script>
    <script>
      (function() {
        let fileName = [];
        const fileInput = document.getElementById("fileInput");
        fileInput.addEventListener("change", (event) => {
          const files = event.target.files;
          const allowedTypes = [
            "image/jpeg",
            "image/png",
            "image/gif",
            "image/bmp",
            "image/webp",
            "image/tiff",
            "image/svg+xml",
            "image/heic",
          ];
          for (let i = 0; i < files.length; i++) {
            if (!allowedTypes.includes(files[i].type)) {
              alert("Chỉ hỗ trợ định dạng hình ảnh.");
              return;
            }
          }
          if (files.length + fileName.length > 5) {
            alert("Bạn chỉ có thể tải lên tối đa 5 hình ảnh.");
            return;
          }
          if (fileName.findIndex((name) => name === files[0].name) === -1) {
            for (let i = 0; i < files.length; i++) {
              fileName.push(files[i].name);
            }
          } else {
            alert("Hình ảnh đã được chọn trước đó.");
          }
          document.querySelector(".kit p").innerText = `${fileName.length}/5`;
        });

        if (!session) {
          window.location.href = "dangnhap.html";
          return;
        }
        if (session && (!session.email || !session.phone)) {
          try {
            const accounts = JSON.parse(
            localStorage.getItem("vk_accounts") || "[]"
            );
            const acc = accounts.find(
            (a) =>
              a.id == session.accountId || a.accountName === session.accountName
            );
            if (acc) {
            session.email = session.email || acc.email || "";
            session.phone = session.phone || acc.phone || "";
            session.fullName = session.fullName || acc.fullName || "";
            // persist updated session so subsequent loads have email/phone
            localStorage.setItem("vk_session", JSON.stringify(session));
            }
          } catch (e) {
            // ignore parse errors
          }
        }
      })();
    </script>
  </body>
</html>
